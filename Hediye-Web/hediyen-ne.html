<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sürpriz Hediyen - Şifreyi Bulunca Açılır 💖</title>
  <style>
    :root{--bg:#fff0f6;--card:#ffffff;--accent:#ff4081;--muted:#7a7a7a}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: radial-gradient(circle at 20% 10%, #fff6fb 0%, transparent 10%), radial-gradient(circle at 80% 90%, #fff0f6 0%, transparent 8%), var(--bg);
      display:flex;align-items:center;justify-content:center;overflow:hidden;
    }

    .heart {
      position: absolute; 
      font-size: 22px; 
      will-change: transform, opacity; 
      animation: floatUp linear forwards;
      pointer-events: none;
      text-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    @keyframes floatUp{
      0%{transform: translateY(0) scale(0.9); opacity:1}
      100%{transform: translateY(-120vh) scale(1.3); opacity:0}
    }

    .card{
      width: min(720px, 92vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.95));
      border-radius:18px;
      padding:32px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      text-align:center;
      position:relative;
      z-index:2;
    }
    h1{margin:0 0 8px; font-size:28px; color:var(--accent)}
    p.lead{margin:0 0 18px; color:var(--muted)}

    .input-row{display:flex; gap:12px; justify-content:center; margin-bottom:14px}
    input[type=password]{padding:12px 14px; border-radius:10px; border:1px solid #f0d7e0; min-width:220px; font-size:16px}
    button{padding:12px 16px; border-radius:10px; border:0; background:var(--accent); color:white; font-weight:600; cursor:pointer}
    button.secondary{background:transparent; color:var(--accent); border:1px dashed rgba(255,64,129,0.25)}

    .hint{font-size:14px; color:#b14b73; margin-top:8px}

    .reveal{margin-top:18px; padding:18px; border-radius:12px; display:none; background:linear-gradient(90deg, rgba(255,232,245,0.6), rgba(255,246,240,0.6));}
    .reveal.show{display:block}
    .gift-title{font-size:20px; margin:6px 0}
    .gift-desc{color:var(--muted); margin:0 0 10px}

    .footer-note{font-size:13px; color: #9a6b82; margin-top:12px}

    @media (max-width:420px){
      h1{font-size:22px}
      input[type=password]{min-width:140px}
    }
  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">Bir sürpriz saklı 💌</h1>
    <p class="lead">Sevgili keşifçi: bu sayfada küçük bir oyun var. Doğru <strong>şifreyi</strong> bulursan hediyeyi göstereceğim. İyi şanslar! 🎯</p>

    <div class="input-row" aria-hidden="false">
      <input id="pwd" type="password" placeholder="Şifreyi buraya gir" aria-label="Şifre girin">
      <button id="openBtn">Göster</button>
      <button id="hintBtn" class="secondary" title="İpucu iste">İpucu</button>
    </div>
    <div class="hint" id="hintText" aria-live="polite"></div>

    <div class="reveal" id="revealBox" aria-live="polite">
      <div class="gift-title">Sürpriz! 🎁</div>
      <div class="gift-desc" id="giftDesc">Doğru şifreyi çözdün. Hediye: <strong>Gizli fotoğraf / mesaj</strong>.</div>
      <div style="margin-top:8px">
        <button id="showMore">Hediyeyi Görüntüle</button>
      </div>
      <div class="footer-note">(Not: Şifreyi değiştirmek için sayfanın altındaki <code>const PASSWORD</code> satırını düzenle.)</div>
    </div>
  </div>

  <script>
  const PASSWORD = 'burup2denselam';
  const GIFT_HTML = `
    <p style="margin:10px 0 8px">Seni çok seviyorum 💖 Bu küçük sürprizi buldun diye çok mutluyum.</p>
    <img src="Barbie.png" alt="Barbie" style="max-width:100%;border-radius:12px;display:block;margin:auto">
    <div style="font-size:13px;color:#8b6b7a;margin-top:8px">(Barbie güzelliğinde bir hediye 💝)</div>
  `;

  const MAX_ATTEMPTS = 3; // günde 3 hakkı var
  const STORAGE_KEY = 'daily_attempts';
  const DATE_KEY = 'attempt_date';

  const body = document.body;
  const pwd = document.getElementById('pwd');
  const openBtn = document.getElementById('openBtn');
  const hintBtn = document.getElementById('hintBtn');
  const hintText = document.getElementById('hintText');
  const revealBox = document.getElementById('revealBox');
  const giftDesc = document.getElementById('giftDesc');
  const showMore = document.getElementById('showMore');
  const inputRow = document.querySelector('.input-row');

  function getTodayDate() {
    return new Date().toISOString().split('T')[0]; // yyyy-mm-dd format
  }

  function loadAttempts() {
    const today = getTodayDate();
    const savedDate = localStorage.getItem(DATE_KEY);
    if (savedDate !== today) {
      localStorage.setItem(DATE_KEY, today);
      localStorage.setItem(STORAGE_KEY, '0');
      return 0;
    }
    return parseInt(localStorage.getItem(STORAGE_KEY) || '0', 10);
  }

  function saveAttempts(n) {
    localStorage.setItem(STORAGE_KEY, n.toString());
  }

  function remainingAttempts() {
    const used = loadAttempts();
    return Math.max(0, MAX_ATTEMPTS - used);
  }

  function incrementAttempts() {
    let used = loadAttempts();
    used++;
    saveAttempts(used);
  }

  function lockPage() {
    // Arka planı grileştir
    body.style.background = "linear-gradient(180deg, #eee, #ccc)";
    // Input ve butonları devre dışı bırak
    pwd.disabled = true;
    openBtn.disabled = true;
    hintBtn.disabled = true;
    inputRow.style.opacity = "0.6";
    // Kilit mesajı ekle
    const lockMsg = document.createElement("div");
    lockMsg.style.marginTop = "20px";
    lockMsg.style.fontSize = "18px";
    lockMsg.style.color = "#666";
    lockMsg.innerHTML = "🔒 Bugünlük hakkın bitti, yarın tekrar dene 💖";
    document.querySelector(".card").appendChild(lockMsg);
  }

  openBtn.addEventListener('click', tryOpen);
  pwd.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') tryOpen(); });
  hintBtn.addEventListener('click', giveHint);
  showMore.addEventListener('click', showGiftContent);

  // Sayfa açıldığında kalan hakkı kontrol et
  window.addEventListener("DOMContentLoaded", () => {
    if (remainingAttempts() <= 0) {
      lockPage();
    }
  });

  function tryOpen(){
    const attemptsLeft = remainingAttempts();
    if (attemptsLeft <= 0) {
      flash('Bugünlük deneme hakkın doldu 😢 Yarın tekrar dene!');
      lockPage();
      return;
    }

    const val = pwd.value;
    if(!val) { flash('Şifre boş olamaz 💬'); return; }
    if(val === PASSWORD){
      revealBox.classList.add('show');
      giftDesc.innerHTML = GIFT_HTML;
      popHearts(24);
      confettiHearts(30);
    } else {
      incrementAttempts();
      const left = remainingAttempts();
      if (left > 0) {
        flash(`Yanlış şifre 💭 (${left} hakkın kaldı)`);
      } else {
        flash('Bugünlük 3 hakkın da doldu 😞 Yarın tekrar dene!');
        lockPage();
      }
      popHearts(0.6);
    }
  }

  function giveHint(){
    const hints = [
      'Küçük harflerle, bitişik yazmayı unutma!',
      '25 sayısını unutma!',
      'Görüşürüz Burup :)'
    ];
    hintText.textContent = hints[Math.floor(Math.random()*hints.length)];
    hintBtn.textContent = 'Başka ipucu';
  }

  function showGiftContent(){
    alert('Tebrikler! Gerçek hediyeyi açtın 💖');
  }

  function flash(msg){
    const old = hintText.textContent;
    hintText.textContent = msg;
    setTimeout(()=>{ hintText.textContent = old; }, 2000);
  }

  function popHearts(n){
    const count = Math.max(0, Math.floor(n));
    for(let i=0;i<count;i++){
      createFloatingHeart(12 + Math.random()*22, 0.8 + Math.random()*0.8);
    }
  }

  function confettiHearts(n){
    for(let i=0;i<n;i++){
      createFloatingHeart(10 + Math.random()*34, 0.6 + Math.random()*1.4, true);
    }
  }

  function createFloatingHeart(size = 18, durationScale = 1, hueRandom=false){
    const el = document.createElement('div');
    el.className = 'heart';
    el.textContent = '❤';
    const left = Math.random()*100;
    el.style.left = left + 'vw';
    el.style.bottom = '-6vh';
    el.style.fontSize = size + 'px';
    const dur = (6 + Math.random()*6) * durationScale;
    el.style.animationDuration = dur + 's';
    if(hueRandom){
      const s = 60 + Math.floor(Math.random()*140);
      el.style.color = `hsl(${s},85%,55%)`;
    } else {
      el.style.color = '#ff3b7a';
    }
    document.body.appendChild(el);
    setTimeout(()=>{ el.remove(); }, (dur*1000)+500);
  }

  setInterval(()=>{ createFloatingHeart(14 + Math.random()*16, 1.2); }, 900);
</script>
